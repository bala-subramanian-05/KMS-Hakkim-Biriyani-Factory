// Menu Data
const menuPackages = {
    grandwedding: {
        name: "Menu for a Royal Wedding",
        items: [
            {
                name: "Mutton Biriyani",
                description: "Tender mutton slow-cooked with fragrant basmati and traditional spices for a royal feast.",
                price: "",
                image: "./images/MuttonBiriyani.jpg",
                rating: 4.8,
                spiceLevel: "Spicy"
            },
            {
                name: "Dalcha",
                description: "A hearty lentil and mutton curry simmered with spices for the perfect biryani companion.",
                price: "",
                image: "./images/Dalcha.jpg",
                rating: 4.9,
                spiceLevel: "Spicy"
            },
            {
                name: "Raita",
                description: "A cool, creamy yogurt mix with herbs and veggies – the perfect balance to spicy biryani.",
                price: "",
                image: "./images/raita.jpg",
                rating: 4.5,
                spiceLevel: "sour"
            },
            {
                name: "Hyderabad Chicken",
                description: "A rich, aromatic chicken curry infused with royal Nawabi spices and slow-cooked to perfection.",
                price: "",
                image: "./images/hyderabadchicken.jpg",
                rating: 4.7,
                spiceLevel: "Mild"
            },
            {
                name: "Kuli Omlette",
                description: "A soft and spicy street-style egg delight, pan-fried with herbs and a desi twist.",
                price: "",
                image: "./images/kuliomlete.jpg",
                rating: 4.6,
                spiceLevel: "Medium"
            },
            {
                name: "Muzzaffar Sweet",
                description: "A rich and aromatic vermicelli dessert cooked with ghee, saffron, and dry fruits – a taste of true Nawabi indulgence.",
                price: "",
                image: "./images/muzaffarsweet.jpg",
                rating: 4.7,
                spiceLevel: "Sweet"
            },
            {
                name: "Bread Halwa",
                description: "Golden-fried bread simmered in ghee, milk, and sugar, creating a melt-in-mouth festive dessert.",
                price: "",
                image: "./images/breadhalwa.jpg",
                rating: 4.9,
                spiceLevel: "Sweet"
            },
            {
                name: "Curd Rice",
                description: "A soothing South Indian classic, tempered with mustard and curry leaves for a refreshing finish.",
                price: "",
                image: "./images/curdrice.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Ice Cream",
                description: "A cool and creamy treat to sweeten every celebration with a touch of delight.",
                price: "",
                image: "./images/icecream.jpg",
                rating: 4.5,
                spiceLevel: "Sweet"
            },
            {
                name: "Beeda",
                description: "A traditional paan delight, folded with sweet fillings to end the meal on a refreshing note.",
                price: "",
                image: "./images/beeda.jpg",
                rating: 4.5,
                spiceLevel: "Sour"
            },
            {
                name: "Water Bottle",
                description: "Pure and chilled – keeping your guests refreshed, sip by sip.",
                price: "",
                image: "./images/watterbottle.jpg",
                rating: "",
                spiceLevel: "Refreshing"
            }
        ]
    },
    wedding: {
        name: "Menu for a Wedding",
        items: [
            {
                name: "Mutton Biriyani",
                description: "Tender mutton slow-cooked with fragrant basmati and traditional spices for a royal feast.",
                price: "",
                image: "./images/MuttonBiriyani.jpg",
                rating: 4.8,
                spiceLevel: "Spicy"
            },
            {
                name: "Dalcha",
                description: "A hearty lentil and mutton curry simmered with spices for the perfect biryani companion.",
                price: "",
                image: "./images/Dalcha.jpg",
                rating: 4.9,
                spiceLevel: "Spicy"
            },
            {
                name: "Raita",
                description: "A cool, creamy yogurt mix with herbs and veggies – the perfect balance to spicy biryani.",
                price: "",
                image: "./images/raita.jpg",
                rating: 4.5,
                spiceLevel: "sour"
            },
            {
                name: "Chicken Manchuriyan",
                description: "Crispy chicken tossed in a tangy, spicy sauce – a bold fusion of Indian and Chinese flavours.",
                price: "",
                image: "./images/chicken-manchurian.jpg",
                rating: 4.7,
                spiceLevel: "Juicy"
            },
            {
                name: "Curd Rice",
                description: "A soothing South Indian classic, tempered with mustard and curry leaves for a refreshing finish.",
                price: "",
                image: "./images/curdrice.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Phirini",
                description: "A creamy, slow-cooked rice pudding infused with saffron and cardamom, served chilled for a royal dessert finish.",
                price: "",
                image: "./images/phirini.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Ice Cream",
                description: "A cool and creamy treat to sweeten every celebration with a touch of delight.",
                price: "",
                image: "./images/icecream.jpg",
                rating: 4.5,
                spiceLevel: "Sweet"
            },
            {
                name: "Water Bottle",
                description: "Pure and chilled – keeping your guests refreshed, sip by sip.",
                price: "",
                image: "./images/watterbottle.jpg",
                rating: "",
                spiceLevel: "Refreshing"
            }
        ]
    },
    grandreception: {
        name: "Menu for a Royal Reception",
        items: [
            {
                name: "Mutton Biriyani",
                description: "Tender mutton slow-cooked with fragrant basmati and traditional spices for a royal feast.",
                price: "",
                image: "./images/MuttonBiriyani.jpg",
                rating: 4.8,
                spiceLevel: "Spicy"
            },
            {
                name: "Dalcha",
                description: "A hearty lentil and mutton curry simmered with spices for the perfect biryani companion.",
                price: "",
                image: "./images/Dalcha.jpg",
                rating: 4.9,
                spiceLevel: "Spicy"
            },
            {
                name: "Raita",
                description: "A cool, creamy yogurt mix with herbs and veggies – the perfect balance to spicy biryani.",
                price: "",
                image: "./images/raita.jpg",
                rating: 4.5,
                spiceLevel: "sour"
            },
            {
                name: "Crab Lollipop",
                description: "Delicately spiced crab meat shaped into juicy lollipops, crisp-fried for a unique seafood starter.",
                price: "",
                image: "./images/crablollipop.jpg",
                rating: 4.7,
                spiceLevel: "Mild"
            },
            {
                name: "Pepper Chicken Gravy",
                description: "A fiery and aromatic dish where tender chicken is coated in freshly ground black pepper and spices.",
                price: "",
                image: "./images/pepperchicken.jpg",
                rating: 4.7,
                spiceLevel: "Mild"
            },
            {
                name: "Kuli Omlette",
                description: "A soft and spicy street-style egg delight, pan-fried with herbs and a desi twist.",
                price: "",
                image: "./images/kuliomlete.jpg",
                rating: 4.6,
                spiceLevel: "Medium"
            },
            {
                name: "Curd Rice",
                description: "A soothing South Indian classic, tempered with mustard and curry leaves for a refreshing finish.",
                price: "",
                image: "./images/curdrice.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Bread Halwa",
                description: "Golden-fried bread simmered in ghee, milk, and sugar, creating a melt-in-mouth festive dessert.",
                price: "",
                image: "./images/breadhalwa.jpg",
                rating: 4.9,
                spiceLevel: "Sweet"
            },
            {
                name: "Phirini",
                description: "A creamy, slow-cooked rice pudding infused with saffron and cardamom, served chilled for a royal dessert finish.",
                price: "",
                image: "./images/phirini.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Ice Cream",
                description: "A cool and creamy treat to sweeten every celebration with a touch of delight.",
                price: "",
                image: "./images/icecream.jpg",
                rating: 4.5,
                spiceLevel: "Sweet"
            },
            {
                name: "Beeda",
                description: "A traditional paan delight, folded with sweet fillings to end the meal on a refreshing note.",
                price: "",
                image: "./images/beeda.jpg",
                rating: 4.5,
                spiceLevel: "Sour"
            },
            {
                name: "Water Bottle",
                description: "Pure and chilled – keeping your guests refreshed, sip by sip.",
                price: "",
                image: "./images/watterbottle.jpg",
                rating: "",
                spiceLevel: "Refreshing"
            }
        ]
    },
    grandreceptionveg: {
        name: "Veg Menu for a Royal Reception",
        items: [
            {
                name: "Romali Rotti",
                description: "Thin, soft, and hand-tossed – a classic North Indian flatbread that folds like a handkerchief.",
                price: "",
                image: "./images/romaliroti.jpg",
                rating: 4.7,
                spiceLevel: "Crispy"
            },
            {
                name: "Panner Butter Masala",
                description: "Cottage cheese cubes simmered in a rich, buttery tomato gravy – creamy, smooth, and indulgent.",
                price: "",
                image: "./images/pannerbuttermasala.jpg",
                rating: 4.8,
                spiceLevel: "Spicy"
            },
            {
                name: "Mushroom Biriyani",
                description: "Fragrant basmati rice layered with spiced mushrooms – a hearty vegetarian twist on a classic biryani.",
                price: "",
                image: "./images/mushroombiriyani.jpg",
                rating: 4.7,
                spiceLevel: "Spicy"
            },
            {
                name: "Dalcha",
                description: "A hearty lentil and veg curry simmered with spices for the perfect biryani companion.",
                price: "",
                image: "./images/Dalcha.jpg",
                rating: 4.9,
                spiceLevel: "Spicy"
            },
            {
                name: "Raita",
                description: "A cool, creamy yogurt mix with herbs and veggies – the perfect balance to spicy biryani.",
                price: "",
                image: "./images/raita.jpg",
                rating: 4.5,
                spiceLevel: "sour"
            },
            {
                name: "Gobi Manchuriyan",
                description: "Crispy cauliflower florets tossed in a bold Indo-Chinese sauce – a favourite fusion starter.",
                price: "",
                image: "./images/gobimanchuriyan.jpg",
                rating: 4.5,
                spiceLevel: "Juicy"
            },
            {
                name: "Veg Balls",
                description: "Crispy-fried vegetable dumplings served in a spicy sauce – perfect for a flavour-packed appetizer.",
                price: "",
                image: "./images/vegballs.jpg",
                rating: 4.,
                spiceLevel: "Crispy"
            },
            {
                name: "Curd Rice",
                description: "A soothing South Indian classic, tempered with mustard and curry leaves for a refreshing finish.",
                price: "",
                image: "./images/curdrice.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Bread Halwa",
                description: "Golden-fried bread simmered in ghee, milk, and sugar, creating a melt-in-mouth festive dessert.",
                price: "",
                image: "./images/breadhalwa.jpg",
                rating: 4.9,
                spiceLevel: "Sweet"
            },
            {
                name: "Phirini",
                description: "A creamy, slow-cooked rice pudding infused with saffron and cardamom, served chilled for a royal dessert finish.",
                price: "",
                image: "./images/phirini.jpg",
                rating: 4.9,
                spiceLevel: "Sour"
            },
            {
                name: "Ice Cream",
                description: "A cool and creamy treat to sweeten every celebration with a touch of delight.",
                price: "",
                image: "./images/icecream.jpg",
                rating: 4.5,
                spiceLevel: "Sweet"
            },
            {
                name: "Beeda",
                description: "A traditional paan delight, folded with sweet fillings to end the meal on a refreshing note.",
                price: "",
                image: "./images/beeda.jpg",
                rating: 4.5,
                spiceLevel: "Sour"
            },
            {
                name: "Water Bottle",
                description: "Pure and chilled – keeping your guests refreshed, sip by sip.",
                price: "",
                image: "./images/watterbottle.jpg",
                rating: "",
                spiceLevel: "Refreshing"
            }
        ]
    },
    reception: {
        name: "Menu for a Reception",
        items: [
            {
                name: "Mutton Pasavu Biriyani",
                description: "A rich, fatty mutton biryani slow-cooked with seeraga samba rice for deep, meaty flavour and aroma.",
                price: "",
                image: "./images/muttonpasavu.jpg",
                rating: 4.8,
                spiceLevel: "Spicy"
            },
            {
                name: "Dalcha",
                description: "A hearty lentil and veg curry simmered with spices for the perfect biryani companion.",
                price: "",
                image: "./images/Dalcha.jpg",
                rating: 4.9,
                spiceLevel: "Spicy"
            },
            {
                name: "Raita",
                description: "A cool, creamy yogurt mix with herbs and veggies – the perfect balance to spicy biryani.",
                price: "",
                image: "./images/raita.jpg",
                rating: 4.5,
                spiceLevel: "sour"
            },
            {
                name: "Chicken Manchuriyan",
                description: "Crispy chicken tossed in a tangy, spicy sauce – a bold fusion of Indian and Chinese flavours.",
                price: "",
                image: "./images/chicken-manchurian.jpg",
                rating: 4.7,
                spiceLevel: "Juicy"
            },
            {
                name: "Muzzaffar Sweet",
                description: "A rich and aromatic vermicelli dessert cooked with ghee, saffron, and dry fruits – a taste of true Nawabi indulgence.",
                price: "",
                image: "./images/muzaffarsweet.jpg",
                rating: 4.7,
                spiceLevel: "Sweet"
            },
            {
                name: "Ice Cream",
                description: "A cool and creamy treat to sweeten every celebration with a touch of delight.",
                price: "",
                image: "./images/icecream.jpg",
                rating: 4.5,
                spiceLevel: "Sweet"
            },
            {
                name: "Water Bottle",
                description: "Pure and chilled – keeping your guests refreshed, sip by sip.",
                price: "",
                image: "./images/watterbottle.jpg",
                rating: "",
                spiceLevel: "Refreshing"
            }
        ]
    },
    dinner: {
        name: "Menu for a Royal Dinner",
        items: [
            {
                name: "Parotta",
                description: "Flaky and golden-layered, this South Indian flatbread pairs perfectly with rich gravies.",
                price: "",
                image: "./images/parotta.jpg",
                rating: 4.5,
                spiceLevel: "Hot"
            },
            {
                name: "Mutton Kuruma",
                description: "Succulent mutton simmered in a creamy, spiced coconut-based gravy for a royal touch.",
                price: "",
                image: "./images/muttonkuruma.jpg",
                rating: 4.8,
                spiceLevel: "Spicy"
            },
            {
                name: "Idiyappam",
                description: "Soft, steamed string hoppers made from rice flour – light, delicate, and perfect with curries.",
                price: "",
                image: "./images/idiyappam.jpg",
                rating: 4.9,
                spiceLevel: "Hot"
            },
            {
                name: "Kal Dosa",
                description: "hick, soft dosa cooked on a stone griddle, offering a fluffy texture that soaks up gravies beautifully.",
                price: "",
                image: "./images/kaldosa.jpg",
                rating: 4.7,
                spiceLevel: "Crispy"
            },
            {
                name: "Sambar & Chutney",
                description: "A classic combo of tangy lentil stew and fresh coconut chutneys – the soul of every South Indian meal.",
                price: "",
                image: "./images/sambarchutney.jpg",
                rating: 4.7,
                spiceLevel: "Juicy"
            },
            {
                name: "Fish Finger",
                description: "Crispy golden fish strips seasoned with spices – a crunchy starter that melts in the mouth.",
                price: "",
                image: "./images/fish-finger.jpg",
                rating: 4.7,
                spiceLevel: "Crispy"
            },
            {
                name: "Chicken Lollipop",
                description: "Juicy chicken wings shaped to perfection, deep-fried and tossed in spicy Indo-Chinese sauce.",
                price: "",
                image: "./images/chickenlollipop.jpg",
                rating: 4.9,
                spiceLevel: "Spicy"
            },
            {
                name: "Veg Noodles",
                description: "Stir-fried noodles tossed with colorful veggies and sauces for a flavour-packed Indo-Chinese twist.",
                price: "",
                image: "./images/vegnoodles.jpg",
                rating: 4.5,
                spiceLevel: "Spicy"
            },
            {
                name: "Badam Milk",
                description: "Stir-fried noodles tossed with colorful veggies and sauces for a flavour-packed Indo-Chinese twist.",
                price: "",
                image: "./images/badammilk.jpg",
                rating: 4.8,
                spiceLevel: "Sweet"
            },
           {
                name: "Water Bottle",
                description: "Pure and chilled – keeping your guests refreshed, sip by sip.",
                price: "",
                image: "./images/watterbottle.jpg",
                rating: "",
                spiceLevel: "Refreshing"
            }
        ]
    }
};

// Global Variables
let currentActiveSection = 'home';
let currentActivePackage = 'grandwedding';

// Initialize the website
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
    
    // Initialize components
    initializeNavigation();
    initializeScrollEffects();
    initializeMenuSystem();
    initializeContactForm();
    initializeIntersectionObserver();
    
    // Load initial menu
    loadMenuItems(currentActivePackage);
    
    console.log('Website initialized successfully!');
});

// Navigation System
function initializeNavigation() {
    const navbar = document.getElementById('navbar');
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const navLinks = document.querySelectorAll('.nav-link, .nav-link-mobile');
    const scrollIndicator = document.querySelector('.scroll-indicator');
    const heroButtons = document.querySelectorAll('.hero-buttons button');

    // Handle scroll effects for navbar
    window.addEventListener('scroll', function() {
        const scrolled = window.scrollY > 50;
        navbar.classList.toggle('scrolled', scrolled);
        
        // Update active section based on scroll position
        updateActiveSection();
    });

    // Mobile menu toggle
    mobileMenuBtn.addEventListener('click', function() {
        const isActive = mobileMenu.classList.contains('active');
        mobileMenu.classList.toggle('active', !isActive);
        
        // Update icon
        const icon = mobileMenuBtn.querySelector('i');
        if (icon) {
            icon.setAttribute('data-lucide', isActive ? 'menu' : 'x');
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
    });

    // Navigation link clicks
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            const target = this.getAttribute('data-target');
            scrollToSection(target);
            
            // Close mobile menu
            mobileMenu.classList.remove('active');
            const icon = mobileMenuBtn.querySelector('i');
            if (icon) {
                icon.setAttribute('data-lucide', 'menu');
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }
        });
    });

    // Scroll indicator click
    if (scrollIndicator) {
        scrollIndicator.addEventListener('click', function() {
            const target = this.getAttribute('data-target');
            scrollToSection(target);
        });
    }

    // Hero button clicks
    heroButtons.forEach(button => {
        button.addEventListener('click', function() {
            const target = this.getAttribute('data-target');
            if (target) {
                scrollToSection(target);
            }
        });
    });
}

// Smooth scroll to section
function scrollToSection(sectionId) {
    const element = document.getElementById(sectionId);
    if (element) {
        const offsetTop = element.offsetTop - 80;
        window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
        });
    }
}

// Update active navigation section
function updateActiveSection() {
    const sections = ['home', 'about', 'menu', 'gallery', 'services', 'clients','contact'];
    const scrollPosition = window.scrollY + 100;

    for (let i = sections.length - 1; i >= 0; i--) {
        const section = document.getElementById(sections[i]);
        if (section && section.offsetTop <= scrollPosition) {
            if (currentActiveSection !== sections[i]) {
                currentActiveSection = sections[i];
                updateActiveNavLinks(sections[i]);
            }
            break;
        }
    }
}

// Update active navigation links
function updateActiveNavLinks(activeSection) {
    const navLinks = document.querySelectorAll('.nav-link, .nav-link-mobile');
    navLinks.forEach(link => {
        const target = link.getAttribute('data-target');
        link.classList.toggle('active', target === activeSection);
    });
}

// Scroll Effects and Animations
function initializeScrollEffects() {
    // Add scroll animations to elements
    const animatedElements = document.querySelectorAll('.fade-in');
    
    window.addEventListener('scroll', function() {
        animatedElements.forEach(element => {
            const elementTop = element.getBoundingClientRect().top;
            const elementVisible = 150;
            
            if (elementTop < window.innerHeight - elementVisible) {
                element.classList.add('visible');
            }
        });
    });
}

// Menu System
function initializeMenuSystem() {
    const packageTabs = document.querySelectorAll('.package-tab');
    
    packageTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const packageId = this.getAttribute('data-package');
            switchMenuPackage(packageId);
        });
    });
}

// Switch menu package
function switchMenuPackage(packageId) {
    if (packageId === currentActivePackage) return;
    
    currentActivePackage = packageId;
    
    // Update active tab
    const packageTabs = document.querySelectorAll('.package-tab');
    packageTabs.forEach(tab => {
        const tabPackageId = tab.getAttribute('data-package');
        tab.classList.toggle('active', tabPackageId === packageId);
    });
    
    // Update category title
    const categoryTitle = document.getElementById('menuCategoryTitle');
    if (categoryTitle && menuPackages[packageId]) {
        categoryTitle.textContent = menuPackages[packageId].name;
    }
    
    // Load menu items with animation
    loadMenuItems(packageId);
}

// Load menu items
function loadMenuItems(packageId) {
    const menuGrid = document.getElementById('menuGrid');
    if (!menuGrid || !menuPackages[packageId]) return;
    
    // Fade out current items
    menuGrid.style.opacity = '0';
    menuGrid.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
        // Clear current items
        menuGrid.innerHTML = '';
        
        // Add new items
        const items = menuPackages[packageId].items;
        items.forEach((item, index) => {
            const menuItem = createMenuItemElement(item, index);
            menuGrid.appendChild(menuItem);
        });
        
        // Fade in new items
        requestAnimationFrame(() => {
            menuGrid.style.opacity = '1';
            menuGrid.style.transform = 'translateY(0)';
        });
        
        // Animate individual items
        const menuItems = menuGrid.querySelectorAll('.menu-item');
        menuItems.forEach((item, index) => {
            setTimeout(() => {
                item.style.opacity = '1';
                item.style.transform = 'translateY(0) scale(1)';
            }, index * 100);
        });
        
    }, 200);
}

// Create menu item element
function createMenuItemElement(item, index) {
    const menuItem = document.createElement('div');
    menuItem.className = 'menu-item';
    menuItem.style.opacity = '0';
    menuItem.style.transform = 'translateY(30px) scale(0.9)';
    menuItem.style.transition = 'all 0.5s ease';
    menuItem.style.transitionDelay = `${index * 0.1}s`;
    
    menuItem.innerHTML = `
        <div class="menu-item-image">
            <img src="${item.image}" alt="${item.name}" loading="lazy">
            <div class="rating-badge">⭐ ${item.rating}</div>
            <div class="spice-badge">${item.spiceLevel}</div>
        </div>
        <div class="menu-item-content">
            <h4 class="menu-item-name">${item.name}</h4>
            <p class="menu-item-description">${item.description}</p>
            <div class="menu-item-footer">
                <span class="menu-item-price">${item.price}</span>
                <div class="availability-status">
                    <div class="status-dot"></div>
                    <span class="status-text">Available</span>
                </div>
            </div>
        </div>
    `;
    
    return menuItem;
}

// Contact Form System
function initializeContactForm() {
    const contactForm = document.getElementById('contactForm');
    
    if (contactForm) {
        contactForm.addEventListener('submit', handleFormSubmission);
    }
}

// Handle form submission
async function handleFormSubmission(event) {
    event.preventDefault();
    
    const submitBtn = document.querySelector('.form-submit-btn');
    const formData = new FormData(event.target);
    
    // Get form values
    const formValues = {
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        serviceType: formData.get('serviceType'),
        guestCount: formData.get('guestCount'),
        eventDate: formData.get('eventDate'),
        message: formData.get('message')
    };
    
    // Validate required fields
    const requiredFields = ['name', 'phone', 'email', 'serviceType', 'message'];
    const missingFields = requiredFields.filter(field => !formValues[field]);
    
    if (missingFields.length > 0) {
        showModal('errorModal', 'Please fill in all required fields.');
        return;
    }
    
    // Validate email
    if (!isValidEmail(formValues.email)) {
        showModal('errorModal', 'Please enter a valid email address.');
        return;
    }
    
    // Validate phone
    if (!isValidPhone(formValues.phone)) {
        showModal('errorModal', 'Please enter a valid phone number.');
        return;
    }
    
    // Show loading state
    submitBtn.classList.add('loading');
    submitBtn.disabled = true;
    
    try {
        // Simulate form submission (replace with actual API call)
        await simulateFormSubmission(formValues);
        
        // Show success message
        showModal('successModal', 'Your message has been sent successfully! We\'ll get back to you soon.');
        
        // Reset form
        event.target.reset();
        
    } catch (error) {
        console.error('Form submission error:', error);
        showModal('errorModal', 'There was an error sending your message. Please try again or contact us directly.');
    } finally {
        // Reset button state
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
    }
}

// Simulate form submission
function simulateFormSubmission(formData) {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            // Simulate success (90% success rate)
            if (Math.random() > 0.1) {
                console.log('Form submitted successfully:', formData);
                resolve();
            } else {
                reject(new Error('Simulated network error'));
            }
        }, 2000);
    });
}

// Validation functions
function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function isValidPhone(phone) {
    const phoneRegex = /^[+]?[\d\s\-\(\)]{10,}$/;
    return phoneRegex.test(phone);
}

// Modal System
function showModal(modalId, message) {
    const modal = document.getElementById(modalId);
    if (!modal) return;
    
    // Update message if provided
    if (message) {
        const messageElement = modal.querySelector('.modal-body p');
        if (messageElement) {
            messageElement.textContent = message;
        }
    }
    
    modal.classList.add('active');
    
    // Close on background click
    modal.addEventListener('click', function(event) {
        if (event.target === modal) {
            closeModal();
        }
    });
    
    // Close on escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeModal();
        }
    });
}

function closeModal() {
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
        modal.classList.remove('active');
    });
}

// Intersection Observer for animations
function initializeIntersectionObserver() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '-50px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                
                // Add staggered animation for children if they exist
                const children = entry.target.querySelectorAll('.fade-in');
                children.forEach((child, index) => {
                    setTimeout(() => {
                        child.classList.add('visible');
                    }, index * 100);
                });
            }
        });
    }, observerOptions);
    
    // Observe all elements with fade-in class
    const elementsToObserve = document.querySelectorAll('.fade-in, .section-header, .about-content, .stats-grid, .service-card, .gallery-item, .contact-item');
    elementsToObserve.forEach(element => {
        observer.observe(element);
    });
}

// Parallax and scroll effects
function initializeParallaxEffects() {
    const heroSection = document.querySelector('.hero-section');
    
    if (heroSection) {
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const rate = scrolled * -0.5;
            
            heroSection.style.backgroundPosition = `center ${rate}px`;
        });
    }
}

// Utility functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function throttle(func, limit) {
    let inThrottle;
    return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}

// Add smooth scrolling for older browsers
function addSmoothScrollPolyfill() {
    if (!('scrollBehavior' in document.documentElement.style)) {
        // Import smooth scroll polyfill for older browsers
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js';
        document.head.appendChild(script);
        
        script.onload = function() {
            window.__forceSmoothScrollPolyfill__ = true;
            window.smoothscroll.polyfill();
        };
    }
}

// Performance optimizations
function optimizeImages() {
    const images = document.querySelectorAll('img');
    
    images.forEach(img => {
        // Add loading="lazy" for better performance
        if (!img.hasAttribute('loading')) {
            img.setAttribute('loading', 'lazy');
        }
        
        // Handle image load errors
        img.addEventListener('error', function() {
            console.warn('Failed to load image:', this.src);
            // You could set a fallback image here
            // this.src = 'path/to/fallback-image.jpg';
        });
    });
}

// Initialize performance optimizations
document.addEventListener('DOMContentLoaded', function() {
    addSmoothScrollPolyfill();
    optimizeImages();
    initializeParallaxEffects();
});

// Export functions for global access
window.KMSWebsite = {
    scrollToSection,
    switchMenuPackage,
    showModal,
    closeModal,
    loadMenuItems
};

// Add some interactive hover effects
document.addEventListener('DOMContentLoaded', function() {
    // Add hover effects to cards
    const cards = document.querySelectorAll('.elegant-card, .service-card, .menu-item');
    
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Add ripple effect to buttons
    const buttons = document.querySelectorAll('.elegant-button, .glass-button, .form-submit-btn');
    
    buttons.forEach(button => {
        button.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            ripple.style.position = 'absolute';
            ripple.style.borderRadius = '50%';
            ripple.style.background = 'rgba(255, 255, 255, 0.6)';
            ripple.style.transform = 'scale(0)';
            ripple.style.animation = 'ripple 0.6s linear';
            ripple.style.left = (e.clientX - e.target.offsetLeft) + 'px';
            ripple.style.top = (e.clientY - e.target.offsetTop) + 'px';
            ripple.style.width = '20px';
            ripple.style.height = '20px';
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
});

// Add ripple animation CSS
const style = document.createElement('style');
style.textContent = `
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);

// Console log for debugging
console.log('KMS Mydeen Biriyani Website - Script loaded successfully!');